<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.airbnb.airbnb_service.mapper.HouseMapper">
    <select id="selectWichList" resultType="com.airbnb.airbnb_service.data.house.WishListVO">
        select wish.*,
            hi.hi_name,
            cc.cc_content as country,
            hai.hai_city as city,
            hai.hai_detail as detail,
            himg.himg_file as main_img,
            hgi.hgi_guest as guest,
            hgi.hgi_bed as bed,
            hgi.hgi_bedroom as bedroom,
            hgi.hgi_bathroom as bathroom,
            hgi.hgi_dog as dog,
            hfi.hfi_base_price as price,
            rpv.total_avg 
        from wish_info wish
        left join house_info hi on hi.hi_seq = wish.wish_hi_seq 
        left join house_address_info hai on hi.hi_hai_seq = hai.hai_seq 
        left join category_country cc on hai.hai_cc_seq = cc.cc_seq 
        left join house_guest_info hgi on hgi.hgi_seq = hi.hi_hgi_seq 
        left join house_fee_info hfi on hfi.hfi_seq = hi.hi_hfi_seq 
        left join (
                select * from house_img where himg_main = 1
        )himg on himg.himg_hi_seq = hi.hi_seq 
        left join rev_point_view rpv on rpv.rpv_hi_seq = wish.wish_hi_seq 
        where wish_mi_seq = #{seq}
    </select>
    <select id="selectReviewCount" resultType="com.airbnb.airbnb_service.data.house.WishListVO">
    select count(*) from wish_info where wish_mi_seq= #{wish_mi_seq}
    </select>
</mapper>